<%- include('partials/header.ejs') %>
<%- include('partials/navbar.ejs') %>
<div id="content-wrapper" class="d-flex flex-column">
    <div id="content">
        <div class="container-fluid">
            <div class="d-sm-flex align-items-center justify-content-between mb-4 mt-4">
                <h1 class="h3 mb-0 text-gray-800 fw-bold">Player Statistics: <b><%= player.name %></b></h1>
            </div>

            <ul class="nav nav-tabs" id="playerNavTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="true">Dashboard</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="maps-tab" data-bs-toggle="tab" data-bs-target="#maps" type="button" role="tab" aria-controls="rounds" aria-selected="false">Maps</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="guns-tab" data-bs-toggle="tab" data-bs-target="#guns" type="button" role="tab" aria-controls="duels" aria-selected="false">Guns/Clutch</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="entry-tab" data-bs-toggle="tab" data-bs-target="#entries" type="button" role="tab" aria-controls="guns" aria-selected="false">Entry</button>
                </li>
            </ul>

            <div class="tab-content mt-2" id="playerNavTabContent">
                <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                    <div class="row">
                        <!-- Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Kills
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.kills %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- KDR -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                K/D
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.kd %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Headshot % -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Headshot %
                                            </div>
                                            <div class="row no-gutters align-items-center">
                                                <div class="col-auto">
                                                    <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800"><%= Math.round(((player.headshots / player.kills) + Number.EPSILON) * 100) %>
                                                        %
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="progress progress-sm mr-2">
                                                        <div class="progress-bar bg-info" role="progressbar"
                                                             style="width: <%= Math.round(((player.headshots / player.kills) + Number.EPSILON) * 100) %>%"
                                                             aria-valuenow="<%= Math.round(((player.headshots / player.kills) + Number.EPSILON) * 100) %>"
                                                             aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Win % -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Win %
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= Math.round(((player.totalWins / player.totalGames) + Number.EPSILON) * 100) %>
                                                %
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-trophy fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Deaths -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Deaths
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.deaths %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-skull fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Assists % -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                Assists
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.assists %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-hands-helping fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ADR -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                ADR
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.adr %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-skull fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- MVP's -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                MVP
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.mvp %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-medal fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Teammates Flashed % -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Teammates Flashed
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.teammatesFlashed %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-eye-slash fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Team Flash Duration -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Team Flash Duration
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= Math.round(player.teamFlashDuration) %>
                                                seconds
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clock fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Enemies Flashed -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Enemies Flashed
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.enemiesFlashed %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-eye-slash fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Flash Duration -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Enemy Flash Duration
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= Math.round(player.flashDuration) %>
                                                seconds
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clock fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Kills Through Smoke -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Kills Through Smoke
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.smokeKills %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-cloud fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Kills While Flashed -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Kills While Flashed
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.killsWhileFlashed %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-eye-slash fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Flash Assists -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                Flash Assists
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.flashAssists %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-hands-helping fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Wallbang Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Wallbang Kills
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.wallbangKills %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-bullseye fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Fall Damage Taken -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Fall Damage Taken
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.fallDamage %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-parachute-box fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- No Scope Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                No Scope Kills
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.noScopeKills %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Total Kill Reward -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Total Kill Reward
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">$ <%= player.killReward %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Bombs Planted -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Bombs Planted
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.bombsPlanted %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-bomb fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Utility Damage % -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Average Utility Damage
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= Math.round(((player.utilityDamage / player.totalGames))) %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-bomb fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Team Utility Damage % -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Average Team Utility Damage
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= Math.round(((player.teamUtilityDamage / player.totalGames))) %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-bomb fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Team Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Team Kills
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.teamKills %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Team Damage -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Team Damage
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.teamDamage %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-skull fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Aces -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Aces
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.fiveKillRounds %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 4 Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                4 Kill Rounds
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.fourKillRounds %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 3 Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                3 Kill Rounds
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.threeKillRounds %></div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 2 Kills -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                2 Kill Rounds
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800"><%= player.twoKillRounds %>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-crosshairs fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="maps" role="tabpanel" aria-labelledby="maps-tab">
                    <div class="d-sm-flex align-items-center justify-content-between mb-4 mt-4">
                        <h1 class="h3 mb-0 text-gray-800 fw-bold">Map Statistics: <b><%= player.name %></b></h1>
                    </div>

                    <%- include('partials/mapBreakdown.ejs', { maps : player.maps }) %>

                </div>
                <div class="tab-pane fade" id="guns" role="tabpanel" aria-labelledby="guns-tab">
                    <div class="d-sm-flex align-items-center justify-content-between mb-4 mt-4">
                        <h1 class="h3 mb-0 text-gray-800 fw-bold">Gun/Clutch Statistics: <b><%= player.name %></b></h1>
                    </div>

                    <div class="row">
                        <div class="col-lg-6">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Guns (<%= player.kills %> Kills)</h6>
                                </div>
                                <div class="card-body">
                                    <% for(var i = 0; i < player.guns.length; i++){ %>
                                        <% if (player.guns[i].kills !== 0) { %>
                                            <h4 class="small font-weight-bold text-uppercase"><%= player.guns[i].name %>
                                                <span class="float-right"><%= player.guns[i].kills %> Kill(s) - (<%= Math.round(((player.guns[i].headshots / player.guns[i].kills) + Number.EPSILON) * 100) %>% HS)</span>
                                            </h4>
                                            <div class="progress mb-4">
                                                <div class="progress-bar bg-success" role="progressbar"
                                                     style="width: <%= Math.round(((player.guns[i].kills / player.guns[0].kills) + Number.EPSILON) * 100) %>%"
                                                     aria-valuenow=" <%= Math.round(((player.guns[i].kills / player.guns[0].kills) + Number.EPSILON) * 100) %>"
                                                     aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        <% } %>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Clutch Success (<%= player.clutchPercentage %>%)</h6>
                                </div>
                                <div class="card-body">

                                    <% if (player.oneVersusOne > 0) { %>
                                        <h4 class="small font-weight-bold text-uppercase">1v1 Clutch %
                                            <span class="float-right"><%= Math.round(((player.oneVersusOneClutched / player.oneVersusOne) + Number.EPSILON) * 100) %> % (<%= player.oneVersusOneClutched %> / <%= player.oneVersusOne %>)</span>
                                        </h4>
                                        <div class="progress mb-4">
                                            <div class="progress-bar bg-success" role="progressbar"
                                                 style="width: <%= Math.round(((player.oneVersusOneClutched / player.oneVersusOne) + Number.EPSILON) * 100) %>%"
                                                 aria-valuenow="<%= Math.round(((player.oneVersusOneClutched / player.oneVersusOne) + Number.EPSILON) * 100) %>"
                                                 aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    <% } %>

                                    <% if (player.oneVersusTwo > 0) { %>
                                        <h4 class="small font-weight-bold text-uppercase">1v2 Clutch %
                                            <span class="float-right"><%= Math.round(((player.oneVersusTwoClutched / player.oneVersusTwo) + Number.EPSILON) * 100) %> % (<%= player.oneVersusTwoClutched %> / <%= player.oneVersusTwo %>)</span>
                                        </h4>
                                        <div class="progress mb-4">
                                            <div class="progress-bar bg-success" role="progressbar"
                                                 style="width: <%= Math.round(((player.oneVersusTwoClutched / player.oneVersusTwo) + Number.EPSILON) * 100) %>%"
                                                 aria-valuenow="<%= Math.round(((player.oneVersusTwoClutched / player.oneVersusTwo) + Number.EPSILON) * 100) %>"
                                                 aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    <% } %>

                                    <% if (player.oneVersusThree > 0) { %>
                                        <h4 class="small font-weight-bold text-uppercase">1v3 Clutch %
                                            <span class="float-right"><%= Math.round(((player.oneVersusThreeClutched / player.oneVersusThree) + Number.EPSILON) * 100) %> % (<%= player.oneVersusThreeClutched %> / <%= player.oneVersusThree %>)</span>
                                        </h4>
                                        <div class="progress mb-4">
                                            <div class="progress-bar bg-success" role="progressbar"
                                                 style="width: <%= Math.round(((player.oneVersusThreeClutched / player.oneVersusThree) + Number.EPSILON) * 100) %>%"
                                                 aria-valuenow="<%= Math.round(((player.oneVersusThreeClutched / player.oneVersusThree) + Number.EPSILON) * 100) %>"
                                                 aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    <% } %>

                                    <% if (player.oneVersusFour > 0) { %>
                                        <h4 class="small font-weight-bold text-uppercase">1v4 Clutch %
                                            <span class="float-right"><%= Math.round(((player.oneVersusFourClutched / player.oneVersusFour) + Number.EPSILON) * 100) %> % (<%= player.oneVersusFourClutched %> / <%= player.oneVersusFour %>)</span>
                                        </h4>
                                        <div class="progress mb-4">
                                            <div class="progress-bar bg-success" role="progressbar"
                                                 style="width: <%= Math.round(((player.oneVersusFourClutched / player.oneVersusFour) + Number.EPSILON) * 100) %>%"
                                                 aria-valuenow="<%= Math.round(((player.oneVersusFourClutched / player.oneVersusFour) + Number.EPSILON) * 100) %>"
                                                 aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    <% } %>

                                    <% if (player.oneVersusFive > 0) { %>
                                        <h4 class="small font-weight-bold text-uppercase">1v5 Clutch %
                                            <span class="float-right"><%= Math.round(((player.oneVersusFiveClutched / player.oneVersusFive) + Number.EPSILON) * 100) %> % (<%= player.oneVersusFiveClutched %> / <%= player.oneVersusFive %>)</span>
                                        </h4>
                                        <div class="progress mb-4">
                                            <div class="progress-bar bg-success" role="progressbar"
                                                 style="width: <%= Math.round(((player.oneVersusFiveClutched / player.oneVersusFive) + Number.EPSILON) * 100) %>%"
                                                 aria-valuenow="<%= Math.round(((player.oneVersusFiveClutched / player.oneVersusFive) + Number.EPSILON) * 100) %>"
                                                 aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="entries" role="tabpanel" aria-labelledby="entry-tab">
                    <div class="d-sm-flex align-items-center justify-content-between mb-4 mt-4">
                        <h1 class="h3 mb-0 text-gray-800 fw-bold">Entry Statistics: <b><%= player.name %></b></h1>
                    </div>

                    <div class="row">
                        <div class="col-lg-6">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Entry Success (<%= player.entrySuccess %>%)</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <div class="chart-pie pt-4">
                                        <div class="chartjs-size-monitor">
                                            <div class="chartjs-size-monitor-expand">
                                                <div class=""></div>
                                            </div>
                                            <div class="chartjs-size-monitor-shrink">
                                                <div class=""></div>
                                            </div>
                                        </div>
                                        <canvas id="entrySuccessPieChart" width="746" height="316"
                                                style="display: block; height: 253px; width: 597px;"
                                                class="chartjs-render-monitor"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<%- include('partials/footer.ejs') %>
<script>
    $(document).ready(function () {
        const mapLabels = [];
        const mapDataWins = [];
        <% for(var i = 0; i < player.maps.length; i++){ %>
        mapLabels.push("<%= player.maps[i].name %>");
        mapDataWins.push("<%= player.maps[i].totalGames %>")
        <% } %>

        const entrySuccess = [<%= player.firstKill %>, <%= player.firstDeath %>];
        const mapData = {
            labels: mapLabels,
            datasets: [
                {
                    label: "Map Distribution Chart",
                    data: mapDataWins,
                    backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc'],
                    hoverBackgroundColor: ['#2e59d9', '#17a673', '#2c9faf'],
                    hoverBorderColor: "rgba(234, 236, 244, 1)",
                }
            ]
        };

        const entryData = {
            labels: ["First Kill", "First Death"],
            datasets: [
                {
                    label: "Entry Success Chart",
                    data: entrySuccess,
                    backgroundColor: ['#4e73df', '#ff0000'],
                    hoverBackgroundColor: ['#4e73df', '#ff0000'],
                    hoverBorderColor: "rgba(234, 236, 244, 1)",
                }
            ]
        }

        //options
        Chart.defaults.font.family = 'Nunito', '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
        Chart.defaults.color = '#858796';

        const mapOptions = {
            maintainAspectRatio: false,
            tooltips: {
                backgroundColor: "rgb(255,255,255)",
                bodyFontColor: "#858796",
                borderColor: '#dddfeb',
                borderWidth: 1,
                xPadding: 15,
                yPadding: 15,
                displayColors: false,
                caretPadding: 10,
            },
            legend: {
                display: false
            },
            cutoutPercentage: 80,
        };

        //create Chart class object
        const mapDistributionDonut = new Chart(document.getElementById('mapDistributionDonut'), {
            type: "doughnut",
            data: mapData,
            options: mapOptions
        });

        const entrySuccessPieChart = new Chart(document.getElementById('entrySuccessPieChart'), {
            type: "doughnut",
            data: entryData,
            options: mapOptions
        });

    });
</script>
